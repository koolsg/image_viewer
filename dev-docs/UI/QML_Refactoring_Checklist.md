좋다. 이건 **실전용 체크리스트**로 가는 게 맞다.
아래 순서대로 따라가면, 1200줄짜리를 **사고 없이** 나눌 수 있다.

---

# ✅ 1200줄 `app.qml` 분해 체크리스트 (실전용)

이건 “이상적인 구조”가 아니라
**지금 있는 파일을 기준으로 안전하게 쪼개는 절차**다.

---

## 0단계 — 절대 먼저 하지 말 것

* 한 번에 여러 파일로 나누기 ❌
* UI랑 상태를 동시에 손대기 ❌
* 성능 튜닝과 구조 변경을 같이 하기 ❌

👉 **분리는 분리만** 한다.

---

## 1단계 — app.qml에서 “절대 루트만 남기기”

### 체크

* `ApplicationWindow`
* `width / height`
* `visible`
* 전역 상태 연결
* `Loader`

이 외의 것은 **전부 후보**다.

📌 기준

> “이 코드가 없어도 창은 떠야 한다”

---

## 2단계 — 눈에 안 보여도 존재하는 것부터 빼기 (가장 안전)

### 체크리스트

아래 중 하나라도 해당되면 **즉시 분리 대상**이다.

* `Dialog`
* `Popup`
* `Menu`
* `Drawer`
* `Shortcut`
* `FileDialog`
* `MessageDialog`
* 설정 화면

👉 특징

* 초기 렌더와 무관
* Loader로 감싸기 쉬움
* 부작용 거의 없음

### 작업

* 파일 하나씩 분리
* app.qml에는 `Loader`만 남김

---

## 3단계 — Overlay 계층 분리

### 분리 후보

* 선택 영역
* 줌 박스
* 가이드 라인
* 크롭 박스
* 임시 표시 UI

### 체크 포인트

* `z > 1`
* `visible` 토글
* 마우스 이벤트 가로채기

👉 이건 이미지 렌더와 **논리적으로 분리 가능**

---

## 4단계 — “항상 보이지만 필수는 아닌 UI”

### 체크리스트

* 사이드바
* 정보 패널
* 히스토그램
* 썸네일 리스트
* 상태바

📌 질문

> “이게 없어도 뷰어는 동작하나?”

Yes → 분리 대상

---

## 5단계 — 애니메이션 / Behavior 덩어리 분리

### 체크

* `Behavior on x`
* `NumberAnimation`
* `Transition`
* `State`

👉 UI와 섞여 있으면:

* 바인딩 복잡도 증가
* 초기 프레임 지연

### 방법

* Animation 전용 컴포넌트
* 혹은 Component 내부로 캡슐화

---

## 6단계 — 진짜 핵심만 남았는지 확인

이 시점에서 app.qml에 남아 있어야 하는 것:

* Root Window
* Main View Loader
* 전역 키 입력
* 앱 생명주기 이벤트

📌 만약:

* 이미지 렌더 코드가 남아 있다 → 아직 덜 나눔
* 패널 UI가 남아 있다 → 덜 나눔

---

## 7단계 — 데이터 흐름 정리 (중요)

분리하면서 반드시 확인할 것:

### 체크리스트

* `parent.parent` 참조 ❌
* `id` 공유 ❌
* 전역 싱글톤 남용 ❌

### 권장

* `property alias`
* `property var`
* signal/slot

👉 **위 → 아래 단방향**만 허용

---

## 8단계 — Loader 기준 재정렬

### 확인

* 처음부터 로드해야 할 것
* 사용자 행동 후 로드해도 되는 것

```qml
Loader {
    active: app.ready
    source: "MainView.qml"
}
```

이 타이밍만 조절해도 첫 실행 체감이 달라진다.

---

## 9단계 — 줄 수 기준 최종 점검

### 기준선

* app.qml: **200~400줄**
* 나눈 파일이 300줄 이상이면 → 다시 분해

📌 “줄 수는 성능 지표는 아니지만, 구조 경고등이다”

---

## 10단계 — 분해 성공 여부 확인

### 성공 신호

* 첫 실행에서 창이 바로 뜸
* QML Profiler에서:

  * Startup Time 감소
  * First Frame 빨라짐
* 특정 UI만 끄고 켤 수 있음

### 실패 신호

* 처음보다 더 느림
* Loader 많아졌는데 체감 없음
* 바인딩 오류 증가

---

## 🧭 요약 (핵심만)

1. **보이지 않는 것부터**
2. **Loader로 늦춰라**
3. **Root는 비워라**
4. **상태는 위에서 아래로**
5. **한 번에 하나씩**

---

다음으로 딱 좋은 후속 주제는:

* **분리하다가 반드시 망하는 5가지 패턴**
* **Loader를 써도 느려지는 경우**
* **QML 파일 경계에서 성능이 좋아지는 설계법**

원하면 바로 이어서 가자.
